<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head>
	
	<meta charset="utf-8" />
	
	<title>选择流程</title>
	<link rel="stylesheet" href="../cssAndJs/libs/bootstrap.css"/>
	<link rel="stylesheet" href="../cssAndJs/libs/font-awesome.css"/>
	<link rel="stylesheet" href="../cssAndJs/libs/layui/css/layui.css"/>
	<link rel="stylesheet" href="../cssAndJs/css/base.css"/>
	<link rel="stylesheet" href="../cssAndJs/css/plan_style.css"/>
	<link rel="stylesheet" href="../css/jquery.treeview.css"/>
	
	<script type="text/javascript" src="../cssAndJs/libs/layui/layui.js"></script>
	<script type="text/javascript" src="../cssAndJs/libs/jquery.js"></script>
	<script type="text/javascript" src="../js/jquery.cookie.js"></script>
	<script type="text/javascript" src="../js/jquery.treeview.js"></script>

	<style type="text/css">
		.audit-div{
			border-style: solid;
		    border-width: 1px;
		    border-color: gainsboro;
		    padding: 15px;
		    height: 455px;
		    margin-top: 8px;
		    overflow-y:hidden;
		    overflow-x:hidden;
		}
		
		.cut-off-line{
			border-style: solid;
			border-width: 1px;
			border-color: gainsboro;
			margin-left: 252px;
			margin-top: -425px;
			height: 425px;
			width: 2px;
		}
		
		.btn_office{
			width: 80px;
		    height: 30px;
		    line-height: 30px;
		}
		
		.custom_form {
			overflow: hidden;
		}
		
		.custom_form_wrap {
			overflow-y: scroll;
			width:270px; 
			height: 425px;
		}
		
		.custom_form .layui-form-checkbox {
			width: 20px;
			height: 20px;
			line-height: 20px;
			margin: 0;
			padding: 0;
		}
		
		.custom_form .layui-form-checkbox i {
			width: 20px;
			font-size: 14px;
		}
		
		.labal-style{
			text-align: left;
    		width: auto;
    		font-size: 14px;
		    color: rgb(37, 38, 38);
		    font-weight: normal;
		    margin-bottom: 0px;
		    margin-left: 15px;
		    line-height: 34px;
		    cursor: pointer;
		}
	</style>
	</head>
  	<!--
	      作者：Jiayan He 
	      时间：2017-10-19
	      描述：选择流程页面
	-->
  	<body style="padding-right: 17px;padding-bottom: 17px;">
    	<div class="plan_layout" style="margin-top: 8px; margin-left: 8px;">
    		<div style="margin-top: 15px;height: 65px;">
    			<form id="myForm" class="layui-form" action="" method="get">
					<table border="0" cellspacing="0" cellpadding="0" style="margin-left: 8px;">
						<tr>
							<td>
								<div class="form_item">
									<label style="width: 60px;margin-top: 0px;">流程名称:</label>
									<div class="input_wrap">
										<input type="text" class="layui-input" style="width: 314px;" id="circuitName" name="circuitName" placeholder="流程名称"/>
									</div>
								</div>
								<div class="form_item" style="margin-left: 12px;">
									<input type="submit" class="btn_sm_blue3 f_left" value="查询"/>
								</div>
							</td>
						</tr>
					</table>
				</form>
    		</div>
   			<div class="audit-div">
   				<div class="layui-form custom_form" style="width: 240px;height: 425px;">
   					<div class="custom_form_wrap">
	   					<div style="margin-left: 40px;margin-top: 8px;" th:each="circuit,userStat:${circuitList}" th:if="${circuitList} != null">
	   						<input type="checkbox" name="circuit" th:value="${circuit.name}" th:onclick="'javascript:check(&quot;'+${circuit.name}+'&quot;);'"/>
	   						<label class="labal-style" th:text="${circuit.name}"></label>
	   						<span th:text="${circuit.procDefKey}"></span>
	   					</div>
   					</div>	
   				</div>
   				<div class="cut-off-line"></div>
   				<div style="width: 240px;height: 425px;margin-left: 270px;margin-top: -425px;">
   					<div style="margin-left: 60px;margin-top: 20px;">
   						<!-- <ul th:id="${circuit.id}" class="layui-timeline" th:each="circuit,userStat:${circuitList}" th:if="${circuit.nodeNames} != null">
						  <li class="layui-timeline-item" th:each="nodeName,userStat:${circuit.nodeNames}">
						    <i class="layui-icon layui-timeline-axis"></i>
						    <div class="layui-timeline-content layui-text">
						      <h4 class="layui-timeline-title" th:text="${nodeName}"></h4>
						    </div>
						  </li>
						</ul> -->
   						<ul class="layui-timeline">
						  <li class="layui-timeline-item">
						    <i class="layui-icon layui-timeline-axis"></i>
						    <div class="layui-timeline-content layui-text">
						      <h4 class="layui-timeline-title">申请人</h4>
						    </div>
						  </li>
						  <li class="layui-timeline-item">
						    <i class="layui-icon layui-timeline-axis"></i>
						    <div class="layui-timeline-content layui-text">
						      <h4 class="layui-timeline-title">部门总监</h4>
						    </div>
						  </li>
						  <li class="layui-timeline-item">
						    <i class="layui-icon layui-timeline-axis"></i>
						    <div class="layui-timeline-content layui-text">
						      <h4 class="layui-timeline-title">副董事长</h4>
						    </div>
						  </li>
						  <li class="layui-timeline-item">
						    <i class="layui-icon layui-timeline-axis"></i>
						    <div class="layui-timeline-content layui-text">
						      <h4 class="layui-timeline-title">董事长</h4>
						    </div>
						  </li>
						  <li class="layui-timeline-item">
						    <i class="layui-icon layui-timeline-axis"></i>
						    <div class="layui-timeline-content layui-text">
						      <h4 class="layui-timeline-title">行政专员归档</h4>
						    </div>
						  </li>
						</ul>
   					</div>  
   				</div>
    		</div>
    		<div class="foot_btn_box" style="margin-top: 28px;">
				<span id="btn1" class="btn_sm_blue8">确定</span>
				<span id="btn2" class="btn_sm_white3" style="margin-left: 80px;">取消</span>
			</div>
    	</div>
  	</body>
  	<script type="text/javascript">
  		layui.use(["form", "laydate"], function () {
			var form = layui.form;
			var layer = layui.layer;
		});
		
		$(".custom_form").on("click", ".layui-form-checkbox", function () {
			$(this).siblings("input").click();
		})
		
		$(".labal-style").click(function() {
			$(this).siblings("input").click();
		})
		
		$(".custom_form_wrap").children(":first").children("input").attr("checked", true);
		$(".custom_form_wrap").children(":first").children("div").addClass("layui-form-checked");
  	</script>
  	<script type="text/javascript">
  		/*<![CDATA[*/
  		$(function(){
			$("#btn1").click(function() {
				var count = 0;
			    $("input[name='circuit']").each(function(){    
		        	if($(this).attr("checked")!=undefined){
		        		count++; 
		        	}
		        });
			    if(count != 0){
			    	var auditProcess = "";
			    	var procDefKey = "";
			    	$("input[name='circuit']").each(function(){    
			        	if($(this).attr("checked")!=undefined){
			        		auditProcess = $(this).val();
			        		procDefKey = $(this).siblings("span").text();
			        	}
			        });
					
					parent.$("#auditProcess").val(auditProcess);			    	
					parent.$("#procDefKey").val(procDefKey);			    	
			    	
			    	var index = parent.layer.getFrameIndex(window.name);
			    	parent.layer.close(index);
			    }else{
			    	layer.msg("请选择流程！");
			    }
			});
			$("#btn2").click(function(){
				var index = parent.layer.getFrameIndex(window.name);
			    parent.layer.close(index);
			});
		});
		
		function check(val){
	    	$("input[name='circuit']").each(function(){    
		        if($(this).val() == val){    
		        	if($(this).attr("checked")!=undefined){
		        		$(this).attr("checked", false);
		        		$(this).next().removeClass("layui-form-checked");
		        	}else{
		        		$(this).attr("checked", true);
		        		$(this).next().addClass("layui-form-checked");
		        	}
		        }else{
		         	$(this).attr("checked", false);
		         	$(this).next().removeClass("layui-form-checked");
		        }
	        }); 
	    } 
		/*]]>*/
  	</script>
  	<script type="text/javascript">
  		function _search(){
  			var officeName = $("#officeName").val();
  			if(officeName != ""){
  				/* $("#second").find("li").each(function() {
	  				if(!$(this).children("span").text().includes(officeName)){
	  					$(this).css("display", "none");
	  				}
	  			}) */
  			}
  		}
  	</script>
</html>
